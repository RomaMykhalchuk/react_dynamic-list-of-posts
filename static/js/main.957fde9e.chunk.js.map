{"version":3,"sources":["Components/User.tsx","Components/Comment.tsx","Components/CommentsList.tsx","Components/Post.tsx","Components/PostsList.tsx","helpers/api.ts","App.tsx","helpers/use-debounce.ts","index.tsx"],"names":["User","user","className","name","href","email","address","street","suite","city","Comment","comment","body","CommentsList","comments","map","key","id","Post","post","title","PostsList","posts","URL","App","useState","setPosts","isLoading","setIsLoading","searchQuery","setSearchQuery","hasError","handleErrorStatus","loadData","a","fetch","then","response","json","postsFromServer","commentsFromServer","usersFromServer","preparedPosts","find","userId","filter","postId","debouncedValue","searchValue","delay","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","visiblePosts","useMemo","searchingQuery","postsList","normalizedQuery","toLowerCase","includes","getVisiblePosts","length","type","onClick","disabled","onChange","event","target","value","placeholder","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.957fde9e.chunk.js","sourcesContent":["import React from 'react';\n\ntype Props = {\n  user: User;\n};\n\nconst User: React.FunctionComponent<Props> = ({ user }) => {\n  return (\n    <div className=\"post__author\">\n      <span className=\"post__author-name\">{user.name}</span>\n      <a href=\"link\" className=\"post__author-email\">\n        {user.email}\n      </a>\n      <span className=\"post__author-address\">\n        {`${user.address.street} ${user.address.suite} ${user.address.city}`}\n      </span>\n    </div>\n  );\n};\n\nexport default User;\n","import React from 'react';\n\ntype Props = {\n  comment: Comment;\n};\n\nconst Comment: React.FunctionComponent<Props> = ({ comment }) => {\n  return (\n    <section className=\"post__comment\">\n      <p className=\"post__comment-body\">{comment.body}</p>\n      <div className=\"post__comment-author\">\n        <a href=\"/\" className=\"post__comment-author-email\">\n          {comment.email}\n        </a>\n        <span className=\"post__comment-author-name\">{comment.name}</span>\n      </div>\n    </section>\n  );\n};\n\nexport default Comment;\n","import React from 'react';\nimport Comment from './Comment';\n\ntype Props = {\n  comments: Comment[];\n};\n\nconst CommentsList: React.FunctionComponent<Props> = ({ comments }) => {\n  return (\n    <section className=\"post__comments-section\">\n      <h3 className=\"post__comments-title\">Comments:</h3>\n      {comments.map((comment) => (\n        <Comment comment={comment} key={comment.id} />\n      ))}\n    </section>\n  );\n};\n\nexport default CommentsList;\n","import React from 'react';\nimport User from './User';\nimport './Post.scss';\nimport CommentsList from './CommentsList';\n\ntype Props = {\n  post: Post;\n};\n\nconst Post: React.FunctionComponent<Props> = ({ post }) => {\n  return (\n    <article className=\"post\">\n      <h2 className=\"post__title\">{post.title}</h2>\n      <p className=\"post__text\">{post.body}</p>\n      <User user={post.user} />\n      <CommentsList comments={post.comments} />\n    </article>\n  );\n};\n\nexport default Post;\n","import React from 'react';\nimport Post from './Post';\n\ntype Props = {\n  posts: Post[];\n};\n\nconst PostsList: React.FunctionComponent<Props> = ({ posts }) => {\n  return (\n    <div className=\"container\">\n      {posts.map((post) => (\n        <Post post={post} key={post.id} />\n      ))}\n    </div>\n  );\n};\n\nexport default PostsList;\n","const URL = 'https://jsonplaceholder.typicode.com';\n\nexport const getPostsFromServer = () => {\n  return fetch(`${URL}/posts`)\n    .then(response => response.json());\n};\n\nexport const getCommentsFromServer = () => {\n  return fetch(`${URL}/comments`)\n    .then(response => response.json());\n};\n\nexport const getUsersFromServer = () => {\n  return fetch(`${URL}/users`)\n    .then(response => response.json());\n};\n","import React, { useState, useMemo } from 'react';\nimport { useDebounce } from './helpers/use-debounce';\nimport './App.css';\nimport PostsList from './Components/PostsList';\n\nimport {\n  getPostsFromServer,\n  getCommentsFromServer,\n  getUsersFromServer,\n} from './helpers/api';\n\nconst App: React.FunctionComponent = () => {\n  const [posts, setPosts] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [hasError, handleErrorStatus] = useState(false);\n\n  const loadData = async () => {\n    setIsLoading(true);\n    try {\n      const postsFromServer = await getPostsFromServer();\n      const commentsFromServer = await getCommentsFromServer();\n      const usersFromServer = await getUsersFromServer();\n\n      const preparedPosts = postsFromServer.map((post: Post) => ({\n        ...post,\n        user: usersFromServer.find((user: User) => user.id === post.userId),\n        comments: commentsFromServer.filter(\n          (comment: Comment) => comment.postId === post.id,\n        ),\n      }));\n\n      setPosts(preparedPosts);\n    } catch {\n      handleErrorStatus(true);\n      setIsLoading(false);\n    }\n  };\n\n  const debouncedValue = useDebounce(searchQuery, 1000);\n\n  const filterPosts = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSearchQuery(event.target.value);\n  };\n\n  const getVisiblePosts = (searchingQuery: string, postsList: Post[]) => {\n    const normalizedQuery = searchingQuery.toLowerCase();\n\n    return postsList\n      .filter((post: Post) => (post.title + post.body)\n        .toLowerCase()\n        .includes(normalizedQuery));\n  };\n\n  const visiblePosts = useMemo(() => getVisiblePosts(debouncedValue, posts), [\n    debouncedValue,\n    posts,\n  ]);\n\n  return (\n    <div className=\"App\">\n      <h1>Dynamic list of posts</h1>\n      {hasError && <h2>Some error appeared, please try again</h2>}\n      {posts.length === 0 ? (\n        <button\n          type=\"button\"\n          onClick={loadData}\n          disabled={isLoading}\n          className=\"button\"\n        >\n          {isLoading ? 'Loading...' : 'Load'}\n        </button>\n      ) : (\n        <>\n          <input\n            type=\"text\"\n            onChange={filterPosts}\n            placeholder=\"search the post\"\n          />\n          <PostsList posts={visiblePosts} />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import { useState, useEffect } from 'react';\n\nexport const useDebounce = (searchValue: string, delay: number) => {\n  const [debouncedValue, setDebouncedValue] = useState(searchValue);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(searchValue);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  },\n  [searchValue, delay]);\n\n  return debouncedValue;\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}